<?xml version="1.0" encoding="utf-8"?>
<Defs>

  <ThingDef ParentName="BuildingBase">
    <defName>DMSE_VacuumPump</defName>
    <label>Vacuum pump</label>
    <description>A gas pump that can slowly evacuates the air from a sealed chamber to artificially create a vacuum zone. It's widely used to meet the environmental requirements of specialized production processes.\n\nHowever, should be noted that when used within atmosphere, a specialized vacuum chamber is required to effectively create a vacuum zone.</description>
    <graphicData>
      <texPath>Things/Building/Candle/building</texPath>
      <graphicClass>Graphic_Multi</graphicClass>
      <drawSize>1.2</drawSize>
    </graphicData>
    <altitudeLayer>Building</altitudeLayer>
    <passability>PassThroughOnly</passability>
    <castEdgeShadows>true</castEdgeShadows>
    <staticSunShadowHeight>0.9</staticSunShadowHeight>
    <fillPercent>0.9</fillPercent>
    <canOverlapZones>false</canOverlapZones>
    <pathCost>42</pathCost>
    <tickerType>Normal</tickerType>
    <statBases>
      <MaxHitPoints>100</MaxHitPoints>
      <WorkToBuild>10000</WorkToBuild>
      <Mass>5</Mass>
      <Flammability>0.25</Flammability>
    </statBases>
    <size>(1,1)</size>
    <costList>
      <Steel>100</Steel>
      <ComponentStamped>4</ComponentStamped>
    </costList>
    <building>
      <destroySound>BuildingDestroyed_Metal_Small</destroySound>
    </building>
    <comps>
      <li Class="CompProperties_Power">
        <compClass>CompPowerTrader</compClass>
        <shortCircuitInRain>true</shortCircuitInRain>
        <basePowerConsumption>500</basePowerConsumption>
        <idlePowerDraw>10</idlePowerDraw>
      </li>
      <li Class="DMSE.CompProperties_VacuumPump">
        <vacuumPerTick>0.1</vacuumPerTick>
      </li>
    </comps>
    <researchPrerequisites>
      <li>DMSE_OrbitalDynamics</li>
    </researchPrerequisites>
    <designationCategory>Odyssey</designationCategory>
    <minifiedDef>MinifiedThing</minifiedDef>
    <constructionSkillPrerequisite>3</constructionSkillPrerequisite>
    <thingCategories>
      <li>BuildingsMisc</li>
    </thingCategories>
  </ThingDef>

  <ThingDef ParentName="BuildingBase">
    <defName>DMSE_OxygenCandle</defName>
    <label>Oxygen candle</label>
    <description>A disposable oxygen supply device that generates breathable oxygen by burning sodium chlorate, maintaining 24-hours of oxygen supply within a sealed cabin before burning out.\n\nIt was widely used for emergency use in enclosed environments such as aircraft, submarines, and manned spacecraft. During the era of space colonization it also became a standard feature of decompression shelters.</description>
    <graphicData>
      <texPath>Things/Building/Candle/building</texPath>
      <graphicClass>Graphic_Multi</graphicClass>
      <drawSize>1.2</drawSize>
    </graphicData>
    <altitudeLayer>Building</altitudeLayer>
    <passability>PassThroughOnly</passability>
    <castEdgeShadows>true</castEdgeShadows>
    <staticSunShadowHeight>0.9</staticSunShadowHeight>
    <fillPercent>0.9</fillPercent>
    <canOverlapZones>false</canOverlapZones>
    <pathCost>42</pathCost>
    <tickerType>Normal</tickerType>
    <statBases>
      <MaxHitPoints>100</MaxHitPoints>
      <WorkToBuild>10000</WorkToBuild>
      <Mass>5</Mass>
      <Flammability>0.25</Flammability>
    </statBases>
    <size>(1,1)</size>
    <costList>
      <Steel>75</Steel>
      <Chemfuel>25</Chemfuel>
    </costList>
    <building>
      <destroySound>BuildingDestroyed_Metal_Small</destroySound>
    </building>
    <comps>
      <li Class="CompProperties_Refuelable">
        <fuelConsumptionRate>1.0</fuelConsumptionRate>
        <fuelCapacity>24.0</fuelCapacity>
        <destroyOnNoFuel>true</destroyOnNoFuel>
        <autoRefuelPercent>0</autoRefuelPercent>
        <initialFuelPercent>1</initialFuelPercent>
        <showAllowAutoRefuelToggle>false</showAllowAutoRefuelToggle>
        <functionsInVacuum>true</functionsInVacuum>
        <fuelFilter>
          <thingDefs>
            <li>ReinforcedBarrel</li>
          </thingDefs>
        </fuelFilter>
      </li>
      <li Class="DMSE.CompProperties_OxygenCandle" />
    </comps>
    <researchPrerequisites>
      <li>DMSE_OrbitalDynamics</li>
    </researchPrerequisites>
    <designationCategory>Odyssey</designationCategory>
    <minifiedDef>MinifiedThing</minifiedDef>
    <constructionSkillPrerequisite>3</constructionSkillPrerequisite>
    <thingCategories>
      <li>BuildingsMisc</li>
    </thingCategories>
  </ThingDef>

  <ThingDef ParentName="BuildingBase">
    <defName>DMSE_VacuumRoom_Entrance</defName>
    <label>vacuum sealed room</label>
    <description>A massive, foreboding hole that connects the surface with a dark network of underground caves. It is possible to climb down into the caverns below.</description>
    <size>(8,8)</size>
    <useHitPoints>false</useHitPoints>
    <thingClass>MapPortal</thingClass>
    <tickerType>Normal</tickerType>
    <rotatable>false</rotatable>
    <terrainAffordanceNeeded>Heavy</terrainAffordanceNeeded>
    <canOverlapZones>false</canOverlapZones>
    <graphicData>
      <graphicClass>Graphic_Single</graphicClass>
      <texPath>Things/Building/PitGate/PitGate</texPath>
      <drawSize>(8,8)</drawSize>
    </graphicData>
    <altitudeLayer>FloorEmplacement</altitudeLayer>
    <passability>PassThroughOnly</passability>
    <holdsRoof>true</holdsRoof>
    <destroyable>true</destroyable>
    <building>
      <isEdifice>true</isEdifice>
      <deconstructible>false</deconstructible>
      <isTargetable>false</isTargetable>
      <isInert>true</isInert>
      <claimable>false</claimable>
      <expandHomeArea>false</expandHomeArea>
    </building>
    <comps>
      <li Class="DMSE.Scorer.CompPropertiesLandFillable">
        <job>DMS_Landfill</job>
        <filled>DMSE_Building_Scorer</filled>
      </li>
    </comps>
    <portal>
      <pocketMapGenerator>DMSE_VacuumRoom</pocketMapGenerator>
      <exitDef>CaveExit</exitDef>
      <pocketMapSize>32</pocketMapSize>
    </portal>
    <statBases>
      <Flammability>0</Flammability>
    </statBases>
    <inspectorTabs>
      <li>ITab_ContentsMapPortal</li>
    </inspectorTabs>
    <designationCategory>DMS_Category</designationCategory>
  </ThingDef>

  <MapGeneratorDef>
    <defName>DMSE_VacuumRoom</defName>
    <label>vacuum sealed room</label>
    <isUnderground>true</isUnderground>
    <forceCaves>true</forceCaves>
    <ignoreAreaRevealedLetter>true</ignoreAreaRevealedLetter>
    <disableCallAid>true</disableCallAid>
    <pocketMapProperties>
      <biome>Space</biome>
      <temperature>10</temperature>
    </pocketMapProperties>
    <genSteps>
      <li>DMSE_VacuumRoom_GenStep</li>
    </genSteps>
  </MapGeneratorDef>

  <GenStepDef>
    <defName>DMSE_VacuumRoom_GenStep</defName>
    <order>251</order>
    <genStep Class="DMSE.GenStep_Prefab">
      <prefab>DMSE_VacuumRoom_Prefab</prefab>
    </genStep>
  </GenStepDef>

  <PrefabDef>
    <defName>DMSE_VacuumRoom_Prefab</defName>        <!-- rename -->
    <size>(32,32)</size>
    <things>
      <CaveExit>
        <position>(14, 0, 18)</position>
      </CaveExit>
      <DMSE_Sealed_Wall>
        <rects>
          <li>(0,0,31,0)</li>
          <li>(0,1,0,31)</li>
          <li>(31,1,31,31)</li>
          <li>(1,31,30,31)</li>
        </rects>
      </DMSE_Sealed_Wall>
    </things>
  </PrefabDef>
</Defs>